<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">oanda_fx_api</span> <span class="kn">as</span> <span class="nn">ofx</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>

    <span class="n">acc</span> <span class="o">=</span> <span class="n">ofx</span><span class="o">.</span><span class="n">Account</span><span class="p">()</span>
    
    <span class="n">symbol</span> <span class="o">=</span> <span class="s1">&#39;EUR_USD&#39;</span>
    <span class="n">granularity</span> <span class="o">=</span> <span class="s1">&#39;S5&#39;</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">1250</span>
    
    <span class="n">dat</span> <span class="o">=</span> <span class="n">ofx</span><span class="o">.</span><span class="n">GetCandles</span><span class="p">(</span><span class="n">acc</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="n">symbol</span><span class="p">,</span> <span class="n">granularity</span><span class="p">)</span><span class="o">.</span><span class="n">request</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="n">dat</span><span class="p">[[</span><span class="s1">&#39;closeBid&#39;</span><span class="p">,</span> <span class="s1">&#39;closeAsk&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
    
    <span class="n">position</span> <span class="o">=</span> <span class="n">ofx</span><span class="o">.</span><span class="n">Positions</span><span class="p">(</span><span class="n">acc</span><span class="p">,</span> <span class="n">symbol</span><span class="p">)</span>
    
    <span class="k">print</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="n">acc</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">acc</span><span class="o">.</span><span class="n">venue</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">position</span><span class="o">.</span><span class="n">checkPosition</span><span class="p">())</span>
    
    <span class="n">rates</span> <span class="o">=</span> <span class="n">ofx</span><span class="o">.</span><span class="n">StreamPrices</span><span class="p">(</span><span class="n">acc</span><span class="p">,</span> <span class="n">symbol</span><span class="p">)</span><span class="o">.</span><span class="n">prices</span><span class="p">()</span>
    
</pre></div>
